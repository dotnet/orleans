<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Code generation | Microsoft Orleans Website </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Code generation | Microsoft Orleans Website ">
    <meta name="generator" content="docfx 2.10.1.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="docfx:rel" content="../../">
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../Images/logo-light.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
              <h1 id="code-generation">Code Generation</h1>
              
<p><strong>Efficient code generation is one of the pillars of Orleans Runtime</strong>. The Orleans Runtime makes use of generated code in order to ensure proper serialization of types that are used across the cluster as well as for generating boilerplate which abstracts away the implementation details of method shipping, exception propagation, and other internal runtime concepts.</p>
<p>There are two modes of <code>OrleansCodeGenerator</code>:</p>
<ol>
<li><p><strong>Build-time Codegen</strong> - in this mode, codegen will run every time your project is compiled. An <code>MSBuild</code> task is injected in your project&#39;s build pipeline, and the code is generated in the project&#39;s <code>Properties\orleans.codegen.cs</code>. To activate this mode, add the package <code>Microsoft.Orleans.OrleansCodeGenerator.Build</code> to your <strong>Grain Interface</strong> project and build it. You will notice that when adding this package no extra references are added to your project but you will see the <code>Properties\orleans.codegen.cs</code> was added. Also if you edit your <code>.csproj</code> file, you will see that an extra <code>MSBuild</code> target was added as well. The good thing about using this mode is that you can step-into the generated code while debugging since the file is physically on the disk. However, your build time will be slower than usual if you have big projects. This is the default mode selected when you create a <strong>Grain Interface</strong> project by using the Visual Studio templates and it was the first codegen mode introduced since the release of Orleans. <strong>Note</strong>: To avoid the hassles of keeping this file under source control, we suggest you to to add it to your <code>.gitignore</code> or whatever ignore mechanism you have on your source control system, so it is not tracked by it, since this file will be re-generated every build.</p>
</li>
<li><p><strong>Runtime Codegen</strong> - introduced recently by @reubenbond, different from the build-time, this mode makes <code>OrleansCodeGenerator</code> to generate code when the Silo is starting. The good thing is that there is no <code>.cs</code> file on disk for the generated code, and you don&#39;t have an extra build step on your build pipeline. The bad thing, is that you can&#39;t step-into the generated code while debugging and it may increase your silo start time a bit. To enable this mode, if you were using the <strong>build-time</strong> codegen, remove all the references to <code>Microsoft.Orleans.OrleansCodeGenerator.Build</code> package and all the <code>Properties\orleans.codegen.cs</code> files then add a reference to <code>Microsoft.Orleans.OrleansCodeGenerator</code> in your <strong>Silo host</strong> project. If you created the project by using the Visual Studio templates, it should already be there otherwise, you can just install <code>icrosoft.Orleans.OrleansCodeGenerator</code> on your silo project. All set! The codegen will run at Silo startup.</p>
</li>
</ol>
<p>Either way the code generated is exactly and there is just a trade-off on whether you want to debug the generated code and slow down your build time or, have faster builds without debug the generated code.</p>

            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/dotnet/orleans/blob/gh-pages/src/Documentation/Advanced-Concepts/Codegen.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2015-2016 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
