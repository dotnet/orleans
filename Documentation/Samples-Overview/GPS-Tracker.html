<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>GPS Tracker | Microsoft Orleans Website </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="GPS Tracker | Microsoft Orleans Website ">
    <meta name="generator" content="docfx 2.10.1.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="docfx:rel" content="../../">
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../Images/logo-light.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
              <h1 id="gps-tracker">GPS Tracker</h1>
              
<p>A sample application to show how Orleans could be used in conjunction with <a href="https://orleans.codeplex.com/wikipage?title=https%3a%2f%2fgithub.com%2fSignalR%2fSignalR&amp;referringTitle=GPS%20Tracker">SignalR</a> to monitor the position of a number of GPS enabled devices, and report these to a web browser.</p>
<p><img src="GPS.png" alt=""></p>
<p>In order to run this sample, you need a Bing Maps API key. The key is used by the <code>GPSTracker.Web</code> project, in Views\Home\Index.cshtml.</p>
<p><a href="http://msdn.microsoft.com/en-us/library/ff428642.aspx">Get a Bing Maps Key</a></p>
<h3 id="running-the-sample">Running the Sample</h3>
<p>Running the sample locally:</p>
<ol>
<li>Open the <code>GPSTracker.sln</code> file in Visual Studio 2013, and build the solution.</li>
<li>Start the local Orleans Silo by running the <code>Host</code> project of the solution.</li>
<li>In Visual Studio, right click on the <code>GPSTracker.Web</code> project, and click <code>Set as StartUp Project</code>.</li>
<li>Press F5 to start <code>GPSTracker.Web</code> web application.</li>
<li>Your browser should open on a map of San Francisco.</li>
<li>In a command window, navigate to the <code>GPSTracker.FakeDeviceGateway\bin\Debug</code> directory, and run the &#39;GPSTracker.FakeDeviceGateway.exe&#39; program.</li>
<li>Pushpins should appear on the map, and move around. Blue ones are moving slow, orange faster.</li>
</ol>
<h3 id="how-it-works">How it Works</h3>
<p>The <code>GPSTracker.FakeDeviceGateway.exe</code> program simulates data generated from 20 GPS devices. It randomly alters their speed and heading to simulate the devices moving within rectangular boundaries. It sends the position data to Orleans once a second.</p>
<p>In Orleans, each device is represented by a <code>Device</code> grain. The grain records the previous position of the device, and can therefore calculate the speed of the device. If the devices has moved, the &#39;Device&#39; grain forwards position and speed to a <code>PushNotification</code> grain.</p>
<p>This &#39;PushNotification&#39; grain maintains a C# SignalR client, which connects to a SignalR hub hosted in the <code>GPSTracker.Web</code> project. This allows the grain to &#39;push&#39; messages to the hub without the need for polling the Orleans API. The grain will batch messages together to improve network performance.</p>
<p>The <code>GPSTracker.Web</code> application forwards all messages to connected web browsers using SignalR.</p>
<p>JavaScript running in the browser positions the pins using a Bing Maps control. If the pin has a low velocity it colors it blue, otherwise orange.</p>
<h3 id="advantages-of-using-orleans">Advantages of using Orleans</h3>
<p>This sample is designed to show Orleans as a low-latency messaging system. Orleans is able to hold state for each device in memory (of which there may be many), allowing a quick calculation to be performed (calculating velocity) based on previous state.</p>
<p>The grain in Orleans can also decide whether the message is worthy of forwarding downstream (has the device moved?) and can therefore filter out unnecessary messages and reduce noise.</p>
<p>The sample also illustrates how SignalR may be used from inside a grain to allow &#39;push&#39; messaging directly to clients.</p>
<p>In a real life scenario you would probably not forward all messages to the browser, and would filter based on groups or device type.</p>

            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/dotnet/orleans/blob/gh-pages/src/Documentation/Samples-Overview/GPS-Tracker.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2015-2016 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
